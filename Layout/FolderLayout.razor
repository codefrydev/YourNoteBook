@inherits LayoutComponentBase
@inject InMemoryRepo InMemoryRepo 
@inject IJSRuntime JsRuntime

<MudThemeProvider/>
<MudPopoverProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>
@inject IDialogService DialogService
<MudLayout>
    <MudAppBar Color="Color.Surface" Elevation="4" Fixed="true" Class="appbar-custom px-4">
        <!-- Left Actions -->
        <MudIconButton Icon="@Icons.Material.Filled.Menu"
                       Color="Color.Primary"
                       Edge="Edge.Start"
                       OnClick="DrawerToggle" />

        <MudIconButton Icon="@Icons.Material.Filled.ArrowBack"
                       Color="Color.Primary"
                       OnClick="GoBack" />

        <!-- Search Input -->
        <MudTextField @bind-Value="Search"
                      Label="Search"
                      Variant="Variant.Outlined"
                      Adornment="Adornment.End"
                      AdornmentIcon="@Icons.Material.Filled.Search"
                      AdornmentColor="Color.Secondary"
                      Class="mx-4"
                      Style="max-width: 400px;" />

        <MudSpacer />

        <!-- Right Actions -->
        <MudTooltip Text="Add Notes">
            <MudIconButton Icon="@Icons.Material.Filled.NoteAdd"
                           Color="Color.Success"
                           OnClick="AddNotes" />
        </MudTooltip>

        <MudTooltip Text="Add Shortcut">
            <MudIconButton Icon="@Icons.Material.Filled.Shortcut"
                           Color="Color.Info"
                           OnClick="AddShortcut" />
        </MudTooltip>
    </MudAppBar>
    <MudDrawer @bind-Open="_drawerOpen" Elevation="2" Color="Color.Default">
        <FolderNavMenu/>
    </MudDrawer>
    <MudMainContent>
        <MudPaper Class="pa-2 ma-2" Elevation="0">
            @Body
        </MudPaper>
    </MudMainContent>
</MudLayout>

<style>
    .appbar-custom {
        background-color: #f0f2f5; /* Soft gray-blue, neutral */
        color: #1f1f1f;            /* Strong dark text */
    }

    .appbar-custom .mud-icon-button {
        margin-left: 6px;
        margin-right: 6px;
        transition: background-color 0.2s ease;
    }

    .appbar-custom .mud-icon-button:hover {
        background-color: rgba(25, 118, 210, 0.1); /* light hover blue */
        border-radius: 8px;
    }
</style>